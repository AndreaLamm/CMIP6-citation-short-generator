# CMIP6-citation-short-generator
A small tool for the automated generation of JSON files for the CMIP6 data citation.
## License 
The **CMIP6 short citation generator** is free software under a BSD 2-Clause License.

## Installation 
For the **CMIP6 short citation generator** no installation is necessary.

## Documentation 

This software package helps you to generate the necessary CMIP6 Citation files in JSON format.
**Requirements**:
* python 3.6.*
* valid JSON file (e.g. produced via Citation GUI)
* DRS as recommended for CMIP6 (https://goo.gl/v1drZl)

The **CMIP6 short citation generator** uses the CMIP6 directory structure to generate the attributes subject and title automatically to a JSON file for each experiment_id of the same source_id.
It is based on the [CMIP6-json-data-citation-generator](https://github.com/znicholls/CMIP6-json-data-citation-generator) by Zeb Nicholls.


### JSON generator package: Content 
The software includes 4 subdirectories in JSON generator:
* /CMIP6_output_data: This folder includes some DRS examples for CMIP6 and Input4MIPs. 
* /input_templates: Folder for the valid JSON files as template and the YAML-files, produced by the software just as a working format
* /output_json: generated JSON files 
* /src: all necessary software packages and the script create_new_citation_json.py

### How to use
The package includes some examples of CMIP6 output DRS together with examples for input JSON-files. Create your first citation files while using these examples with the script _"create_new_citation_json.py"_.  
* select a valid json-file and copy to /input_templates
* check the necessary entries (creator, funder, contributor, …) for your source_id and the experiment_id 
* open the file /src/create_new_citation_json.py and adapt the information in the first part (path to the data, name of the template, …)
* run the python script create_new_citation_json.py
* check the generated JSON files in /output_json

### Details
The script /src/create_new_citation_json.py includes all information and directories which are needed to generate the citation JSON files.
The first block has to be adopted to your file structure (see Figure 1, red arrow). The package generates json file(s) for 
* Input4MIPs data (set in4mips to 1)  
    OR
* CMIP6 data:
  * Source_id (set source to 1) and/or
  * Experiment_id (set exp to 1)
  
The two different granularities for CMIP6 data citation could be combined in the same “run”. 
The next part (grey arrow) includes the directory structure for the templates and the output files generated by the package. Do not change these two!
In the third block (blue arrow) the directory structure has to be adopted to your CMIP6 data. The official CMIP6 DRS is recommended:
CMIP6 Directory structure = 
<mip_era> / <activity_id> / <source_id> / <experiment_id> / <member_id> / …
In the last block (yellow arrow) the json template files has to be named (please copy your template to the “template_dir” directory).

![Figure 1: Part of the python script create_new_citation_json.py which has to be adopted by the user.](/images/create_script.png)

Your template JSON file should include all necessary information for the chosen source and/or experiment, which are the following attributes:
* creator
* contributor: contact person
* funders
* references as possible.
The generated JSON files could be checked with the API checking functionality and afterwards uploaded to the citation service with the API.
